/*! For license information please see frontend-spb.js.LICENSE.txt */
!function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=4)}({"./src/frontend/frontend-shared.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"PaypalPayments",(function(){return a}));class a{static scrollTop(){jQuery("html, body").animate({scrollTop:0},300)}static setNotices(e){jQuery(".woocommerce-notices-wrapper:first").html(e)}static makeRequest(e,t){const r={async:!0,crossDomain:!0,url:a.replaceVars(paypal_brasil_settings.paypal_brasil_handler_url,{ACTION:e}),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t)};return jQuery.ajax(r)}static showDefaultButton(){jQuery("#paypal-brasil-button-container .default-submit-button").show(),jQuery("#paypal-brasil-button-container .paypal-submit-button").hide()}static showPaypalButton(){jQuery("#paypal-brasil-button-container .default-submit-button").hide(),jQuery("#paypal-brasil-button-container .paypal-submit-button").show()}static isPaypalPaymentsSelected(){return!!jQuery("#payment_method_paypal-brasil-spb-gateway:checked").length}static triggerUpdateCheckout(){jQuery(document.body).trigger("update_checkout")}static triggerUpdateCart(){jQuery(document.body).trigger("wc_update_cart")}static submitForm(){jQuery("form.woocommerce-checkout, form#order_review").submit()}static replaceVars(e,t){let r=e;for(let e in t)t.hasOwnProperty(e)&&(r=r.replace(new RegExp("{"+e+"}","g"),t[e]));return r}}},"./src/frontend/frontend-spb/frontend-spb-api.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"paymentSpb",(function(){return o}));var a=r("./src/frontend/frontend-shared.ts");const o={create:()=>paypal_brasil_settings.is_order_pay_page?jQuery("#paypal-spb-fields [name=paypal-brasil-spb-order-pay-ec]").val():new Promise((e,t)=>{a.PaypalPayments.makeRequest("checkout",{nonce:paypal_brasil_settings.nonce,first_name:jQuery("form.woocommerce-checkout [name=billing_first_name]").val(),last_name:jQuery("form.woocommerce-checkout [name=billing_last_name]").val(),country:jQuery("form.woocommerce-checkout [name=billing_country]").val(),address_line_1:jQuery("form.woocommerce-checkout [name=billing_address_1]").val(),address_line_2:jQuery("form.woocommerce-checkout [name=billing_address_2]").val(),number:jQuery("form.woocommerce-checkout [name=billing_number]").val(),city:jQuery("form.woocommerce-checkout [name=billing_city]").val(),state:jQuery("form.woocommerce-checkout [name=billing_state]").val(),neighborhood:jQuery("form.woocommerce-checkout [name=billing_neighborhood]").val(),postcode:jQuery("form.woocommerce-checkout [name=billing_postcode]").val(),phone:jQuery("form.woocommerce-checkout [name=billing_phone]").val()}).done((function(t){e(t.data.ec)})).fail((function(e){t(e.responseJSON)}))}),approve:e=>{jQuery("#paypal-spb-fields [name=paypal-brasil-spb-order-id]").val(e.orderID),jQuery("#paypal-spb-fields [name=paypal-brasil-spb-payer-id]").val(e.payerID),jQuery("#paypal-spb-fields [name=paypal-brasil-spb-pay-id]").val(e.paymentID),a.PaypalPayments.submitForm()},error:e=>{a.PaypalPayments.triggerUpdateCheckout(),e&&(a.PaypalPayments.setNotices(e.data.error_notice),a.PaypalPayments.scrollTop())},cancel:()=>{a.PaypalPayments.triggerUpdateCheckout(),a.PaypalPayments.setNotices(paypal_brasil_spb_settings.cancel_message),a.PaypalPayments.scrollTop()}}},"./src/frontend/frontend-spb/frontend-spb.scss":function(e,t,r){},"./src/frontend/frontend-spb/frontend-spb.ts":function(e,t,r){"use strict";r.r(t);var a=r("./src/frontend/frontend-shared.ts"),o=r("./src/frontend/frontend-spb/frontend-spb-api.ts");class n extends a.PaypalPayments{constructor(){super();const e=jQuery("body");e.on("updated_checkout",this.updateCheckoutButton),jQuery("form.woocommerce-checkout, form#order_review").on("change","[name=payment_method]",this.updateCheckoutButton),e.on("updated_checkout",this.renderPayPalButton),paypal_brasil_settings.is_order_pay_page&&jQuery("body").trigger("updated_checkout")}updateCheckoutButton(){a.PaypalPayments.isPaypalPaymentsSelected()?a.PaypalPayments.showPaypalButton():a.PaypalPayments.showDefaultButton()}renderPayPalButton(){document.getElementById("paypal-button").innerHTML="",paypal.Buttons({locale:"pt_BR",style:{size:"responsive",color:paypal_brasil_settings.style.color,shape:paypal_brasil_settings.style.format,label:"pay"},createOrder:o.paymentSpb.create,onApprove:o.paymentSpb.approve,onError:o.paymentSpb.error,onCancel:o.paymentSpb.cancel}).render("#paypal-button")}}new n},4:function(e,t,r){r("./src/frontend/frontend-spb/frontend-spb.ts"),e.exports=r("./src/frontend/frontend-spb/frontend-spb.scss")}});
//# sourceMappingURL=frontend-spb.js.map